<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Guard</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üõ°Ô∏è IP Guard</h1>
    </div>
    
    <div class="status-section">
      <div id="statusIndicator" class="status-indicator">
        <div class="spinner"></div>
        <span id="statusText">Checking...</span>
      </div>
      <div id="currentIp" class="current-ip"></div>
      <div id="enhancedInfo" class="enhanced-info"></div>
      <div id="statusMessage" class="status-message"></div>
      <div class="status-meta">
        <span class="meta-item">Last check: <span id="lastCheck">Never</span></span>
        <span class="meta-separator">‚Ä¢</span>
        <span class="meta-item">Auto-check: <span id="autoCheckInterval">Every 2 minutes</span></span>
      </div>
      <div id="saveNotification" class="save-notification"></div>
    </div>

    <div class="config-section">
      <h3>Target IP Configuration</h3>
      <div class="input-group">
        <label for="targetIpv4Input">Target IPv4 Address(es):</label>
        <input 
          type="text" 
          id="targetIpv4Input" 
          placeholder="e.g., 70.47.26.0/24 or 70.47.26.183-185"
          spellcheck="false"
        >
        <small class="hint">Supports: CIDR (10.0.0.0/24), range (70.47.26.183-185), or list (IP1, IP2). Empty = verify NO IPv4</small>
      </div>
      <div class="input-group">
        <label for="targetIpv6Input">Target IPv6 Address(es):</label>
        <input 
          type="text" 
          id="targetIpv6Input" 
          placeholder="e.g., 2001:db8::/64 or 2001:db8::1, 2001:db8::2"
          spellcheck="false"
        >
        <small class="hint">Supports: CIDR (2001:db8::/64) or list (IP1, IP2). Empty = verify NO IPv6</small>
      </div>
      <button id="saveButton" class="btn-primary">Save Target IPs</button>
      <button id="checkButton" class="btn-secondary">Check Now</button>
      
      <details class="advanced-settings">
        <summary>Advanced Settings</summary>
        <div class="input-group">
          <label for="apiSelect">IP Detection API:</label>
          <select id="apiSelect">
            <option value="ipify">ipify.org (Default, Fast)</option>
            <option value="cloudflare">Cloudflare (1.1.1.1, China-accessible)</option>
            <option value="amazonaws">AWS CheckIP (Reliable)</option>
            <option value="ipinfo">ipinfo.io (Alternative)</option>
            <option value="ipapi">ipapi.co (Alternative)</option>
            <option value="icanhazip">icanhazip.com (Alternative)</option>
            <option value="myip">api.my-ip.io (Alternative)</option>
          </select>
          <small class="hint">Try Cloudflare or AWS if blocked in your region</small>
        </div>
        <div class="input-group">
          <label for="checkInterval">Auto-Check Interval:</label>
          <select id="checkInterval">
            <option value="1">Every 1 minute</option>
            <option value="2" selected>Every 2 minutes (Default)</option>
            <option value="5">Every 5 minutes</option>
            <option value="10">Every 10 minutes</option>
            <option value="15">Every 15 minutes</option>
            <option value="30">Every 30 minutes</option>
            <option value="60">Every 60 minutes</option>
          </select>
          <small class="hint">How often to check IP automatically</small>
        </div>
        <div class="input-group">
          <label for="notificationsToggle" class="checkbox-label">
            <input type="checkbox" id="notificationsToggle" checked>
            Desktop Notifications
          </label>
          <small class="hint">Show notifications when IP status changes</small>
        </div>
      </details>

      <details class="connection-history">
        <summary>Connection History (Last 24h)</summary>
        <div class="history-container">
          <div class="history-header">
            <div class="header-col">Time</div>
            <div class="header-col">Status</div>
            <div class="header-col">IP Address</div>
            <div class="header-col">Changed</div>
          </div>
          <div id="historyList" class="history-list">
            <div class="empty-history">No history yet. IP checks will appear here.</div>
          </div>
          <div class="history-actions">
            <button id="exportCsvButton" class="btn-history">Export CSV</button>
            <button id="clearHistoryButton" class="btn-history">Clear History</button>
          </div>
        </div>
      </details>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
